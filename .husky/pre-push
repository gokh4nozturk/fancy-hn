#!/bin/sh

# Clean console logs from all files
clean_logs() {
  changed=false
  
  # Find all .ts, .tsx, and .js files in the app directory
  for file in $(find app -type f \( -name "*.ts" -o -name "*.tsx" -o -name "*.js" \)); do
    if grep -l "console\.\(log\|info\|debug\)" "$file" > /dev/null; then
      sed -i '' '/console\.\(log\|info\|debug\)/d' "$file"
      sed -i '' '/^$/N;/^\n$/D' "$file"
      echo "Cleaned logs from $file"
      git add "$file"
      changed=true
    fi
  done

  if [ "$changed" = true ]; then
    return 0
  else
    return 1
  fi
}

# Run the clean logs function
if clean_logs; then
  git commit -m "chore: clean console logs"
  echo "Created commit for log cleanup"
fi 