#!/bin/sh

# Clean console logs from staged files
clean_logs() {
  for file in $(git diff --name-only --cached | grep '\.tsx\?$\|\.js$'); do
    if [ -f "$file" ] && grep -l "console\.\(log\|info\|debug\)" "$file" > /dev/null; then
      sed -i '' '/console\.\(log\|info\|debug\)/d' "$file"
      sed -i '' '/^$/N;/^\n$/D' "$file"
      echo "Cleaned logs from $file"
      git add "$file"
      return 0
    fi
  done
  return 1
}

# Run the clean logs function
if clean_logs; then
  git commit -m "chore: clean console logs"
  echo "Created commit for log cleanup"
fi 